#!/usr/bin/env bash

# Array gsub
bin/convert ruby-spec/core/array 'Style/ArrayInitialization' 'autocorrect'
find ruby-spec/core/array -type f -name "*.rb" -exec sed -i.bak "s/ArraySpecs::MyArray/MyCollectionArray/g" {} \;
find ruby-spec/core/array -type f -name "*.rb" -exec sed -i.bak "s/be_an_instance_of(Array)/be_an_instance_of(Grizzly::Collection)/g" {} \;
find ruby-spec/core/array -type f -name "*.rb" -exec sed -i.bak "s/be_an_instance_of(Enumerator)/be_an_instance_of(Grizzly::Enumerator)/g" {} \;

# Enumerable gsub
bin/convert ruby-spec/core/enumerable 'Style/ArrayInitialization,Style/GrepImplementation' 'autocorrect'

# Enumerator
bin/convert ruby-spec/core/enumerator 'Style/EnumeratorInitialization' 'autocorrect'
find ruby-spec/core/enumerator -type f -name "*.rb" -exec sed -i.bak "s/be_an_instance_of(Enumerator)/be_an_instance_of(Grizzly::Enumerator)/g" {} \;
find ruby-spec/core/enumerator -type f -name "*.rb" -exec sed -i.bak "s/\[1,2,3\].select/Grizzly::Enumerator.new([1,2,3].select)/g" {} \;
